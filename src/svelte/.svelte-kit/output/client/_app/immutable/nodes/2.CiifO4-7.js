import{f as I,b as U}from"../chunks/CNE7uOga.js";import{i as $}from"../chunks/DiDrDqUk.js";import{o as N}from"../chunks/CvbJCj2Z.js";import{p as h,W as P,X as R,Y as x,Z as C,y as O,_ as j,q,O as d,K as B,A as u,u as H,M as w,N as p,$ as y,a0 as b}from"../chunks/BO0ZvBGM.js";import{b as K,l as V,e as W}from"../chunks/Bz9HKDcm.js";const Y=Symbol("is custom element"),D=Symbol("is html");function k(e){if(h){var a=!1,o=()=>{if(!a){if(a=!0,e.hasAttribute("value")){var n=e.value;S(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var r=e.checked;S(e,"checked",null),e.checked=r}}};e.__on_r=o,P(o),K()}}function S(e,a,o,n){var r=G(e);h&&(r[a]=e.getAttribute(a),a==="src"||a==="srcset"||a==="href"&&e.nodeName==="LINK")||r[a]!==(r[a]=o)&&(a==="loading"&&(e[R]=o),e.removeAttribute(a))}function G(e){return e.__attributes??(e.__attributes={[Y]:e.nodeName.includes("-"),[D]:e.namespaceURI===x})}function L(e,a,o=a){var n=C();V(e,"input",r=>{var t=r?e.defaultValue:e.value;if(t=_(e)?m(t):t,o(t),n&&t!==(t=a())){var i=e.selectionStart,c=e.selectionEnd;e.value=t??"",c!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(c,e.value.length))}}),(h&&e.defaultValue!==e.value||O(a)==null&&e.value)&&o(_(e)?m(e.value):e.value),j(()=>{var r=a();_(e)&&r===m(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function _(e){var a=e.type;return a==="number"||a==="range"}function m(e){return e===""?null:+e}var X=I('<meta name="site-url" content="[[SITE_URL]]"/> <h1>Welcome to My Page</h1> <div class="login svelte-949sr8"><h4>Login:</h4> <input type="text" name="username" placeholder="Username"/> <input type="password" name="password" placeholder="Password"/> <div><button>Login</button></div></div>',1);function ae(e,a){q(a,!1);let o="";N(()=>{const s=document.querySelector('meta[name="site-url"]');o=((s==null?void 0:s.content)??"").replace(/\/$/,"")}),console.log(o);let n=b(""),r=b("");async function t(){const s=new URLSearchParams;s.append("user",u(n)),s.append("password",u(r));try{const l=await fetch(`${o}/api/signin`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s.toString()});if(!l.ok)throw new Error(`Login failed with status ${l.status}`);const M=(await l.json()).response,A=encodeURIComponent(`${o}/main.html`),E=encodeURIComponent(M);window.location.href=`${o}/authenticate?next=${A}&jwk=${E}`}catch(l){console.error("Login error:",l),alert("Login failed: "+l.message)}}$();var i=X(),c=d(B(i),4),f=d(w(c),2);k(f);var v=d(f,2);k(v);var g=d(v,2),T=w(g);p(g),p(c),L(f,()=>u(n),s=>y(n,s)),L(v,()=>u(r),s=>y(r,s)),W("click",T,t),U(e,i),H()}export{ae as component};
